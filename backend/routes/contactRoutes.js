// backend/routes/contactRoutes.js

const express = require("express");
const router = express.Router();
const { verifyFirebaseToken } = require("../middleware/authMiddleware");
const {
  getContacts,
  createContact,
  updateContact,
  deleteContact,
} = require("../controllers/contactController");

// ======================================================================
// ğŸ“© Contactï¼ˆå•ã„åˆã‚ã›ï¼‰é–¢é€£ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°
// ã“ã®ãƒ•ã‚¡ã‚¤ãƒ«ã§ã¯ã€å¤–éƒ¨å…¬é–‹ç”¨ã®å•ã„åˆã‚ã›ç™»éŒ²ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆã¨ã€
// ç¤¾å“¡ãŒåˆ©ç”¨ã™ã‚‹å•ã„åˆã‚ã›ç®¡ç†ç”¨ã®ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆã‚’å®šç¾©ã™ã‚‹ã€‚
// ======================================================================

// ============================
// ğŸŒ å…¬é–‹ãƒ•ã‚©ãƒ¼ãƒ ç”¨ï¼ˆèªè¨¼ä¸è¦ï¼‰
// ============================
// âœ… èª°ã§ã‚‚å•ã„åˆã‚ã›ã‚’ç™»éŒ²ã§ãã‚‹ï¼ˆèªè¨¼ä¸è¦ï¼‰
// ä¾‹: Webã‚µã‚¤ãƒˆã®ãŠå•ã„åˆã‚ã›ãƒ•ã‚©ãƒ¼ãƒ 
router.post("/public", createContact);

// ============================
// ğŸ¢ ç¤¾å“¡ç”¨ï¼ˆèªè¨¼å¿…é ˆï¼‰
// ============================
// ğŸ” ã“ã®ä¸‹ã®ãƒ«ãƒ¼ãƒˆã¯ã™ã¹ã¦ Firebase ãƒˆãƒ¼ã‚¯ãƒ³èªè¨¼ãŒå¿…è¦
router.use(verifyFirebaseToken);

// ğŸ“„ å•ã„åˆã‚ã›ä¸€è¦§å–å¾—
// - èªè¨¼æ¸ˆã¿ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒã€ç™»éŒ²ã•ã‚ŒãŸå•ã„åˆã‚ã›ä¸€è¦§ã‚’å–å¾—
router.get("/", getContacts);

// âœï¸ å•ã„åˆã‚ã›ã‚’æ–°è¦ç™»éŒ²
// - èªè¨¼æ¸ˆã¿ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒå•ã„åˆã‚ã›ã‚’ç™»éŒ²
// - æ‹…å½“è€…ã¯è‡ªå‹•çš„ã«ã€Œè‡ªåˆ†ã€ã«ãªã‚‹
router.post("/", createContact);

// âœï¸ å•ã„åˆã‚ã›æƒ…å ±ã‚’æ›´æ–°
// - æŒ‡å®šã•ã‚ŒãŸå•ã„åˆã‚ã›IDã®å†…å®¹ã‚’æ›´æ–°
router.put("/:id", updateContact);

// ğŸ—‘ï¸ å•ã„åˆã‚ã›ã‚’å‰Šé™¤
// - æŒ‡å®šã•ã‚ŒãŸå•ã„åˆã‚ã›IDã®å•ã„åˆã‚ã›ã‚’å‰Šé™¤
router.delete("/:id", deleteContact);

module.exports = router;
